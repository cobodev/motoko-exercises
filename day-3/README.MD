# Muro de estudiantes üé®

Era tu tercer d√≠a en Motoko School y estabas decidido a empezar a hacer buenos amigos. Siendo un gran fan√°tico de la m√∫sica, pensaste que organizar un peque√±o concierto podr√≠a ser una excelente manera de conocer a otros estudiantes con intereses similares. üé∂

Mientras paseabas por los pasillos durante la hora del almuerzo, escuchaste a dos estudiantes discutiendo c√≥mo desear√≠an que hubiera una mejor manera de mantenerse informados sobre los eventos y actividades escolares. Se quejaron de c√≥mo se hab√≠an perdido la Conferencia de la Comunidad de ICP del a√±o anterior porque no estaban al tanto a tiempo, y de c√≥mo estaban decididos a no dejar que eso vuelva a suceder este a√±o. üí™

Esto despert√≥ una idea en tu mente. <br/>

¬øQu√© tal si pudieras crear una plataforma digital donde los estudiantes compartieran los eventos y actividades pr√≥ximas? Ser√≠a la manera perfecta de publicitar tu concierto de m√∫sica y ayudar a otros estudiantes a mantenerse informados sobre todo lo que sucede en el campus. üìÖ

Compartiste r√°pidamente tu idea con los dos estudiantes y les encant√≥. Te presentaron a otros interesados en la idea, y antes de que te dieras cuenta, ten√≠as un grupo de estudiantes motivados listos para dar vida a tu idea. üöÄ

Todos se reunieron en el laboratorio de computaci√≥n y comenzaron a pensar en las caracter√≠sticas de su muro de estudiantes. Quer√≠an que fuera algo m√°s que un tablero de anuncios, as√≠ que se les ocurri√≥ la idea de incluir im√°genes y encuestas tambi√©n. Dividieron el trabajo y comenzaron a codificar.
## üßë‚Äçüè´ Requisitos
Tu tarea es desarrollar el c√≥digo para un muro de estudiantes, implementado como un canister, una plataforma digital que revolucionar√° la forma en que los estudiantes se comunican y se mantienen informados sobre eventos, clubes y actividades de la comunidad. Imagina un espacio din√°mico e interactivo donde los estudiantes puedan compartir sus pensamientos, ideas y eventos pr√≥ximos entre ellos.

Este muro ser√° el destino principal para los estudiantes que buscan obtener la informaci√≥n m√°s reciente sobre lo que est√° sucediendo en la escuela.
## üì∫ Interfaz
Tu canister debe implementar la siguiente interfaz:
```motoko
actor {
   
    // Add a new message to the wall
    writeMessage: shared (c : Content) -> async Nat;

    //Get a specific message by ID
    getMessage: shared query (messageId : Nat) -> async Result.Result<Message, Text>;

    // Update the content for a specific message by ID
    updateMessage: shared (messageId : Nat, c : Content) -> async Result.Result<(), Text>;

    //Delete a specific message by ID
    deleteMessage: shared (messageId : Nat) -> async Result.Result<(), Text>;

    // Voting
    upVote: shared (messageId  : Nat) -> async Result.Result<(), Text>;
    downVote: shared (messageId  : Nat) -> async Result.Result<(), Text>;

    //Get all messages
    getAllMessages : query () -> async [Message];

    //Get all messages
    getAllMessagesRanked : query () -> async [Message];
};
```
## üìí Pasos
Definimos un tipo de variante llamado `Content` que representa el tipo de contenido de los mensajes que pueden ser publicados en el muro.
```motoko
public type Content = {
    #Text: Text;
    #Image: Blob;
    #Video: Blob;
};
```
1. Define un nuevo tipo de registro llamado `Message`. Un mensaje de tipo `Message` contiene un campo `vote` de tipo `Int`, un campo `content` de tipo `Content` y un campo `creator` de tipo `Principal` que representa al creador del mensaje.
2. Define una variable llamada `messageId` que sirve como un contador continuamente creciente, manteniendo un registro del total de mensajes publicados.
3. Crea una variable llamada `wall`, que es un `HashMap` dise√±ado para almacenar mensajes. En este muro, las claves son de tipo `Nat` y representan los ID de los mensajes, mientras que los valores son de tipo `Message`.
4. Implementa la funci√≥n `writeMessage`, que acepta un contenido `c` de tipo `Content`, crea un mensaje a partir del contenido, lo agrega al muro y devuelve el ID del mensaje.
5. Implementa la funci√≥n `getMessage`, que acepta un `messageId` de tipo `Nat` y devuelve el mensaje correspondiente envuelto en un resultado `Ok`. Si el `messageId` es inv√°lido, la funci√≥n debe devolver un mensaje de error envuelto en un resultado `Err`.
6. Implementa la funci√≥n `updateMessage`, que acepta un `messageId` de tipo `Nat` y un contenido `c` de tipo `Content`, y actualiza el contenido del mensaje correspondiente. Esto solo debe funcionar si el llamador es el `creator` del mensaje. Si el `messageId` es inv√°lido o el llamador no es el `creator`, la funci√≥n debe devolver un mensaje de error envuelto en un resultado `Err`. Si todo funciona y el mensaje se actualiza, la funci√≥n debe devolver un valor de unidad simple envuelto en un resultado `Ok`.
7. Implementa la funci√≥n `deleteMessage`, que acepta un `messageId` de tipo `Nat`, elimina el mensaje correspondiente del `wall` y devuelve un valor de unidad envuelto en un resultado `Ok`. Si el `messageId` es inv√°lido, la funci√≥n debe devolver un mensaje de error envuelto en un resultado `Err`.
8. Implementa la funci√≥n `upVote`, que acepta un `messageId` de tipo `Nat`, agrega un voto al mensaje y devuelve un valor de unidad envuelto en un resultado `Ok`. Si el `messageId` es inv√°lido, la funci√≥n debe devolver un mensaje de error envuelto en un resultado `Err`.
9. Implementa la funci√≥n `downVote`, que acepta un `messageId` de tipo `Nat`, resta un voto al mensaje y devuelve un valor de unidad envuelto en un resultado `Ok`. Si el `messageId` es inv√°lido, la funci√≥n debe devolver un mensaje de error envuelto en un resultado `Err`.
10. Implementa la funci√≥n de consulta `getAllMessages`, que devuelve la lista de todos los mensajes.
11. Implementa la funci√≥n de consulta `getAllMessagesRanked`, que devuelve la lista de todos los mensajes, donde cada mensaje est√° ordenado por el n√∫mero de votos. El primer mensaje de la lista debe ser el mensaje con m√°s votos.
12. Despliega el muro de estudiantes en Internet Computer.
13. (Paso de bonificaci√≥n) Construye una interfaz de usuario para el muro e integra Internet Identity para autenticar a los usuarios que publiquen en el muro.

